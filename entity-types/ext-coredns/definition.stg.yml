domain: EXT
type: COREDNS

synthesis:
  rules:
    # telemetry with instance where metricName like `coredns_%` defined
    - identifier: instance
      name: instance
      encodeIdentifierInGUID: true
      conditions:
        - attribute: metricName
          value: coredns_build_info
  tags:
    instrumentation.provider:
    instrumentation.name:
    namespace:
      entityTagName: k8s.namespaceName
    pod:
      entityTagName: k8s.podName
    cluster_name:
      entityTagNames: k8s.clusterName
    node:
      entityTagNames: k8s.nodeName

dashboardTemplates:
  newRelic:
    template: dashboard.json

configuration:
  entityExpirationTime: EIGHT_DAYS
  alertable: true
